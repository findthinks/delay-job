import{af as s,ae as B,a as F,w as E,Y as L,f as J,K as Q,Z as H,ag as T,am as U,dd as M,N as o,p as c,_ as j,cE as ee,X as S,ac as ae,ad as te,bz as re}from"./index.c6cd9d59.js";import{u as ne}from"./useBreakpoint.2016889e.js";import{r as se}from"./responsiveObserve.a808bc28.js";import{u as le,a as oe}from"./useSize.d1c02cee.js";var V={prefixCls:s.string,shape:s.oneOf(B("circle","square")).def("circle"),size:{type:[Number,String,Object],default:function(){return"default"}},src:s.string,srcset:s.string,icon:s.VNodeChild,alt:s.string,gap:s.number,draggable:s.bool,loadError:{type:Function}},ie=F({name:"AAvatar",inheritAttrs:!1,props:V,slots:["icon"],setup:function(e,b){var C=b.slots,n=b.attrs,f=E(!0),h=E(!1),x=E(1),l=E(null),y=E(null),O=L("avatar",e),d=O.prefixCls,W=le(),I=ne(),m=J(function(){if(Q(e.size)==="object"){var t=se.find(function(r){return I.value[r]}),a=e.size[t];return a}}),z=function(a){return m.value?{width:"".concat(m.value,"px"),height:"".concat(m.value,"px"),lineHeight:"".concat(m.value,"px"),fontSize:"".concat(a?m.value/2:18,"px")}:{}},p=function(){if(!(!l.value||!y.value)){var a=l.value.offsetWidth,r=y.value.offsetWidth;if(a!==0&&r!==0){var P=e.gap,g=P===void 0?4:P;g*2<r&&(x.value=r-g*2<a?(r-g*2)/a:1)}}},N=function(){var a=e.loadError,r=a==null?void 0:a();r!==!1&&(f.value=!1)};return H(function(){return e.src},function(){T(function(){f.value=!0,x.value=1})}),H(function(){return e.gap},function(){T(function(){p()})}),U(function(){T(function(){p(),h.value=!0})}),function(){var t,a,r=e.shape,P=e.size,g=e.src,X=e.alt,$=e.srcset,q=e.draggable,_=M(C,e,"icon"),u=d.value,i=P==="default"?W.value:P,K=(t={},o(t,"".concat(n.class),!!n.class),o(t,u,!0),o(t,"".concat(u,"-lg"),i==="large"),o(t,"".concat(u,"-sm"),i==="small"),o(t,"".concat(u,"-").concat(r),r),o(t,"".concat(u,"-image"),g&&f.value),o(t,"".concat(u,"-icon"),_),t),Y=typeof i=="number"?{width:"".concat(i,"px"),height:"".concat(i,"px"),lineHeight:"".concat(i,"px"),fontSize:_?"".concat(i/2,"px"):"18px"}:{},w=(a=C.default)===null||a===void 0?void 0:a.call(C),A;if(g&&f.value)A=c("img",{draggable:q,src:g,srcset:$,onError:N,alt:X},null);else if(_)A=_;else if(h.value||x.value!==1){var R="scale(".concat(x.value,") translateX(-50%)"),Z={msTransform:R,WebkitTransform:R,transform:R},D=typeof i=="number"?{lineHeight:"".concat(i,"px")}:{};A=c(ee,{onResize:p},{default:function(){return[c("span",{class:"".concat(u,"-string"),ref:l,style:j(j({},D),Z)},[w])]}})}else A=c("span",{class:"".concat(u,"-string"),ref:l,style:{opacity:0}},[w]);return c("span",S(S({},n),{},{ref:y,class:K,style:j(j(j({},Y),z(!!_)),n.style)}),[A])}}}),k=ie,ce={prefixCls:s.string,maxCount:s.number,maxStyle:{type:Object,default:function(){return{}}},maxPopoverPlacement:s.oneOf(B("top","bottom")).def("top"),size:V.size},ue=F({name:"AAvatarGroup",inheritAttrs:!1,props:ce,setup:function(e,b){var C=b.slots,n=b.attrs,f=L("avatar-group",e),h=f.prefixCls,x=f.direction;return oe(e),function(){var l,y=e.maxPopoverPlacement,O=y===void 0?"top":y,d=e.maxCount,W=e.maxStyle,I=(l={},o(l,h.value,!0),o(l,"".concat(h.value,"-rtl"),x.value==="rtl"),o(l,"".concat(n.class),!!n.class),l),m=M(C,e),z=ae(m).map(function(a,r){return te(a,{key:"avatar-key-".concat(r)})}),p=z.length;if(d&&d<p){var N=z.slice(0,d),t=z.slice(d,p);return N.push(c(re,{key:"avatar-popover-key",content:t,trigger:"hover",placement:O,overlayClassName:"".concat(h.value,"-popover")},{default:function(){return[c(k,{style:W},{default:function(){return["+".concat(p-d)]}})]}})),c("div",S(S({},n),{},{class:I,style:n.style}),[N])}return c("div",S(S({},n),{},{class:I,style:n.style}),[z])}}}),G=ue;k.Group=G;k.install=function(v){return v.component(k.name,k),v.component(G.name,G),v};export{k as A};
