import{D as I}from"./index.b72cc388.js";import{B as k}from"./TableImg.3ea102f7.js";import"./useForm.306d84e7.js";import{P as x}from"./index.a5c9b96c.js";import{ar as B,c as R,a as Y,x as v,w as N,cp as C,at as u,o as z,k as D,B as _,n as y,p as h,l as P,D as O,G as $}from"./index.c6cd9d59.js";import{D as E}from"./index.35447d01.js";import{g as A,c as G}from"./job.b2f68091.js";import"./responsiveObserve.a808bc28.js";import"./get.1c474c66.js";import"./index.2e3f3fc1.js";import"./index.58195024.js";import"./warning.e82de0db.js";import"./index.40da7c35.js";import"./index.84a3ee03.js";import"./isEqual.5cd663ea.js";import"./useWindowSizeFn.d7e3700c.js";import"./index.516d775a.js";import"./FullscreenOutlined.95b6bc70.js";import"./useSortable.c23ab760.js";import"./_baseIteratee.15e11edf.js";import"./index.1764bc9d.js";import"./index.c3e8013e.js";import"./useSize.d1c02cee.js";import"./scrollTo.bc092d17.js";import"./transButton.15df72c4.js";import"./index.d37eb46e.js";import"./index.3fd27773.js";import"./download.dbdf06c7.js";import"./index.11bb4552.js";import"./index.2ea56e6e.js";import"./index.de09d623.js";import"./useBreakpoint.2016889e.js";import"./useContentViewHeight.e48256e4.js";import"./ArrowLeftOutlined.ab0ba0f8.js";const{toString:K}=Object.prototype;function L(r){return K.call(r)==="[object RegExp]"}function F(r){const l=typeof r;return r!==null&&(l==="object"||l==="function")}const{propertyIsEnumerable:M}=Object.prototype;function V(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r).filter(l=>M.call(r,l))]}function W(r,l,g){const d=[];return function b(e,o={},i=""){const f=o.indent||"	";let n;o.inlineCharacterLimit===void 0?n={newline:`
`,newlineOrSpace:`
`,pad:i,indent:i+f}:n={newline:"@@__STRINGIFY_OBJECT_NEW_LINE__@@",newlineOrSpace:"@@__STRINGIFY_OBJECT_NEW_LINE_OR_SPACE__@@",pad:"@@__STRINGIFY_OBJECT_PAD__@@",indent:"@@__STRINGIFY_OBJECT_INDENT__@@"};const p=t=>{if(o.inlineCharacterLimit===void 0)return t;const c=t.replace(new RegExp(n.newline,"g"),"").replace(new RegExp(n.newlineOrSpace,"g")," ").replace(new RegExp(n.pad+"|"+n.indent,"g"),"");return c.length<=o.inlineCharacterLimit?c:t.replace(new RegExp(n.newline+"|"+n.newlineOrSpace,"g"),`
`).replace(new RegExp(n.pad,"g"),i).replace(new RegExp(n.indent,"g"),i+f)};if(d.includes(e))return'"[Circular]"';if(e==null||typeof e=="number"||typeof e=="boolean"||typeof e=="function"||typeof e=="symbol"||L(e))return String(e);if(e instanceof Date)return`new Date('${e.toISOString()}')`;if(Array.isArray(e)){if(e.length===0)return"[]";d.push(e);const t="["+n.newline+e.map((c,s)=>{const j=e.length-1===s?n.newline:","+n.newlineOrSpace;let m=b(c,o,i+f);return o.transform&&(m=o.transform(e,s,m)),n.indent+m+j}).join("")+n.pad+"]";return d.pop(),p(t)}if(F(e)){let t=V(e);if(o.filter&&(t=t.filter(s=>o.filter(e,s))),t.length===0)return"{}";d.push(e);const c="{"+n.newline+t.map((s,j)=>{const m=t.length-1===j?n.newline:","+n.newlineOrSpace,S=typeof s=="symbol",J=!S&&/^[a-z$_][$\w]*$/i.test(s),T=S||J?s:b(s,o);let w=b(e[s],o,i+f);return o.transform&&(w=o.transform(e,s,w)),n.indent+String(T)+": "+w+m}).join("")+n.pad+"}";return d.pop(),p(c)}return e=e.replace(/\\/g,"\\\\"),e=String(e).replace(/[\r\n]/g,t=>t===`
`?"\\n":"\\r"),o.singleQuotes===!1?(e=e.replace(/"/g,'\\"'),`"${e}"`):(e=e.replace(/'/g,"\\'"),`'${e}'`)}(r,l,g)}const{t:a}=R(),H=Y({components:{Description:I,BasicTable:k,PageWrapper:x,[E.name]:E},setup(){const{createMessage:r}=$(),{info:l,success:g,warning:d,error:b}=r,e=v({outJobNo:null});let o=N({}),i=N(!1);function f(){e.outJobNo&&(i.value=!0,A({outJobNo:e.outJobNo}).then(t=>{t&&(o.value=t[0])}).finally(()=>{i.value=!1}))}function n(){G(o).then(()=>{g(a("biz.message.success")),f()})}const p=[{field:"id",label:a("biz.job.id")},{field:"outJobNo",label:a("biz.job.outJobNo")},{field:"jobShardId",label:a("biz.job.jobShardId")},{field:"triggerTime",label:a("biz.job.triggerTime"),render:t=>{if(t)return C(t,"YYYY-MM-DD HH:mm:ss")}},{field:"gmtCreate",label:a("biz.job.gmtCreate"),render:t=>{if(t)return C(t,"YYYY-MM-DD HH:mm:ss")}},{field:"type",label:a("biz.job.type"),render:t=>{switch(t){case 5:return a("biz.job.commonJob");case 10:return a("biz.job.pausableJob")}}},{field:"state",label:a("biz.job.state"),render:t=>{switch(t){case 10:return a("biz.job.submitState");case 20:return a("biz.job.retryingState");case 30:return a("biz.job.successState");case 40:return a("biz.job.faildState");case 50:return a("biz.job.canceledState")}}},{field:"callbackProtocol",label:a("biz.job.callbackProtocol"),render:t=>{switch(t){case 0:return"HTTP";case 5:return"GRPC";case 10:return"KAFKA";case 20:return"LOG"}}},{field:"callbackEndpoint",label:a("biz.job.callbackEndpoint")},{field:"jobInfo",label:a("biz.job.params"),render:t=>{if(!t)return t;let c;try{c=W(JSON.parse(t),{indent:"    ",singleQuotes:!1})}catch(s){c=t}return c}}];return{t:a,refundSchema:p,refundData:o,search:f,searchKey:e,spinning:i,handleCancel:n}}}),Q={style:{flex:"1",display:"flex","align-items":"center","justify-content":"flex-end",margin:"10px"}},U={style:{display:"inline-flex"}},q=O("\u641C\u7D22"),X={style:{margin:"auto",width:"50%","min-height":"300px"}},Z={style:{"margin-right":"10px","margin-bottom":"10px"}},ee=O("\u53D6\u6D88\u4EFB\u52A1");function te(r,l,g,d,b,e){const o=u("a-input"),i=u("a-button"),f=u("Description"),n=u("a-spin"),p=u("PageWrapper");return z(),D(p,{contentBackground:""},{default:_(()=>[y("div",Q,[y("div",U,[h(o,{placeholder:r.t("biz.job.outJobNo"),value:r.searchKey.outJobNo,"onUpdate:value":l[0]||(l[0]=t=>r.searchKey.outJobNo=t),style:{width:"250px"}},null,8,["placeholder","value"]),h(i,{type:"primary",onClick:r.search},{default:_(()=>[q]),_:1},8,["onClick"])])]),y("div",X,[h(n,{size:"default",spinning:r.spinning},{default:_(()=>[h(f,{size:"default",title:r.t("biz.job.detailTitle"),bordered:!1,column:1,data:r.refundData,"onUpdate:data":l[1]||(l[1]=t=>r.refundData=t),schema:r.refundSchema},null,8,["title","data","schema"])]),_:1},8,["spinning"]),y("div",Z,[r.refundData.state==10?(z(),D(i,{key:0,type:"primary",onClick:r.handleCancel},{default:_(()=>[ee]),_:1},8,["onClick"])):P("",!0)])])]),_:1})}var Ye=B(H,[["render",te]]);export{Ye as default};
