import{B as f}from"./TableImg.3ea102f7.js";import{n as g}from"./useForm.306d84e7.js";import{u as z}from"./useTable.cd6fa638.js";import{ar as T,c as _,a as S,at as o,o as w,k as C,B as s,p as l,D as B,t as A,G as I}from"./index.c6cd9d59.js";import{T as k}from"./index.84a3ee03.js";import{P as v}from"./index.a5c9b96c.js";import{s as y,a as D,d as P,e as $}from"./shard.a992a108.js";import"./index.2e3f3fc1.js";import"./index.58195024.js";import"./warning.e82de0db.js";import"./index.40da7c35.js";import"./isEqual.5cd663ea.js";import"./get.1c474c66.js";import"./useWindowSizeFn.d7e3700c.js";import"./index.516d775a.js";import"./FullscreenOutlined.95b6bc70.js";import"./index.35447d01.js";import"./useSortable.c23ab760.js";import"./_baseIteratee.15e11edf.js";import"./index.1764bc9d.js";import"./index.c3e8013e.js";import"./responsiveObserve.a808bc28.js";import"./useSize.d1c02cee.js";import"./scrollTo.bc092d17.js";import"./transButton.15df72c4.js";import"./index.d37eb46e.js";import"./index.3fd27773.js";import"./download.dbdf06c7.js";import"./index.11bb4552.js";import"./index.2ea56e6e.js";import"./index.de09d623.js";import"./useBreakpoint.2016889e.js";import"./useContentViewHeight.e48256e4.js";import"./ArrowLeftOutlined.ab0ba0f8.js";const{t}=_(),R=[{title:t("biz.shard.id"),dataIndex:"id",width:50},{title:t("biz.shard.curServer"),dataIndex:"curServer",width:150,format:e=>e===-1?"-":e},{title:t("biz.shard.reqServer"),dataIndex:"reqServer",width:100,format:e=>e===-1?"-":e},{title:t("biz.shard.state"),dataIndex:"state",width:100,format:e=>{if(e===5)return t("biz.shard.enable");if(e===10)return t("biz.shard.transferring");if(e===15)return t("biz.shard.disable")}}],W=S({components:{BasicTable:f,PageWrapper:v,Tag:k,TableAction:g},setup(){const{createMessage:e}=I(),{info:c,success:r,warning:b,error:h}=e,[m,{reload:i}]=z({title:t("biz.shard.listTitle"),api:y,columns:R,pagination:!1,showIndexColumn:!1,actionColumn:{width:250,title:t("biz.shard.option"),dataIndex:"action",slots:{customRender:"action"}}});function n(){D().then(()=>{r(t("biz.message.success")),i()})}function p(a){P(a.id).then(()=>{r(t("biz.message.success")),i()})}function d(a){$(a.id).then(()=>{r(t("biz.message.success")),i()})}return{registerTable:m,addShard:n,handleDisable:p,handleEnable:d,t}}});function q(e,c,r,b,h,m){const i=o("a-button"),n=o("TableAction"),p=o("BasicTable"),d=o("PageWrapper");return w(),C(d,{contentBackground:"",contentClass:"flex",dense:"",contentFullHeight:"",fixedHeight:""},{default:s(()=>[l(p,{onRegister:e.registerTable},{toolbar:s(()=>[l(i,{type:"primary",onClick:e.addShard},{default:s(()=>[B(A(e.t("biz.shard.add")),1)]),_:1},8,["onClick"])]),action:s(({record:a})=>[l(n,{actions:[{label:e.t("biz.shard.enable"),popConfirm:{title:e.t("biz.shard.enableTips"),confirm:e.handleEnable.bind(null,a)},ifShow:u=>a.state===15},{label:e.t("biz.shard.disable"),popConfirm:{title:e.t("biz.shard.disableTips"),confirm:e.handleDisable.bind(null,a)},ifShow:u=>a.state===5}]},null,8,["actions"])]),_:1},8,["onRegister"])]),_:1})}var fe=T(W,[["render",q]]);export{fe as default};
